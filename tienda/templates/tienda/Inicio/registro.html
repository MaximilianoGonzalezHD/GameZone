<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <link type="text/css" rel="stylesheet" href="{% static 'tienda/CSS/Estilo.css' %}">

    <style>
        .fondoregistro {
            background-size: 100%;
            background-image: url("{% static 'tienda/IMG/fondoIS.jpg' %}");
        }

        @media only screen and (max-width: 1300px) {
            .fondoregistro {
                background-image: url("{% static 'tienda/IMG/FondoCel.jpg' %}");
            }
        }
    </style>
</head>

<body class="fondoregistro">
    <div class="container">
        <div class="row mb-5">
            <div class="col-md-12">
                <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
                    <a href="{% url 'tienda' %}" class="navbar-brand">
                        <h3>G<span>Z</span></h3>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#onenavbar">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="onenavbar">
                        <ul class="navbar-nav">
                            <li class="nav-item mt-3"><a href="{% url 'tienda' %}" class="nav-link">Tienda</a></li>
                            <li class="nav-item dropdown mt-3">
                                <a href="#" class="nav-link dropdown-toggle"
                                    data-toggle="dropdown">Loguear/Registrarse</a>
                                <div class="dropdown-menu">
                                    <a href="{% url 'inicio_sesion' %}" class="dropdown-item">Iniciar Sesión</a>
                                    <a href="{% url 'registro' %}" class="dropdown-item">Registrarse</a>
                                </div>
                            </li>
                            <li class="nav-item mt-3"><a href="{% url 'Nosotros' %}" class="nav-link">Nosotros</a></li>
                            <li class="nav-itemmt-3"><a href="{% url 'seccion_playstation' %}" class="nav-link"><img
                                        class="imgiconav" src="{% static 'tienda/IMG/IconosIMG/iconoplei.png' %}"
                                        alt="plei"></a></li>
                            <li class="nav-item"><a href="{% url 'seccion_Xbox' %}" class="nav-link"><img
                                        class="imgiconav" src="{% static 'tienda/IMG/IconosIMG/iconoxbos.png' %}"
                                        alt="XBOS"></a></li>
                            <li class="nav-item"><a href="{% url 'seccion_nintendo' %}" class="nav-link"><img
                                        class="imgiconav" src="{% static 'tienda/IMG/IconosIMG/NS_logo.png'%}"
                                        alt="nintendo"></a></li>
                            <li class="nav-item"><a href="{% url 'Seccion_Pc' %}" class="nav-link"><img
                                        class="imgiconav" src="{% static 'tienda/IMG/IconosIMG/steam-logo.png'%}"
                                        alt="Steam"></a></li>
                            <li class="nav-item mt-2"><a href="{% url 'Carrito' %}"><img class="imgiconav"
                                        src="{% static 'tienda/IMG/IconosIMG/icon_carrito.png' %}" alt="carro"></a></li>
                        </ul>
                        <form class="form-inline ml-auto mt-3" action="#">
                            <input type="text" class="form-control" placeholder="Buscar">
                            <button type="button" class="btn btn-outline-light">Buscar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row mt-3 mb-3">
            <div class="col-md-12">
                <h2 class="Titulo p-1"> Registro De Usuario</h2>
            </div>
        </div>

        <hr>
        <div class="form-container colorP">
            <form class="col centrado" method="POST" action="{% url 'registrarUsuario' %}" id="formR">
                {% csrf_token %}
                <div class="form-element mr-3">
                    <label class="Letra" for="email">Correo Electronico:</label>
                    <input type="email" id="email" name="email" placeholder="Ingrese Correo.." required>
                </div>
                <div class="form-element mr-4">
                    <label class="Letra" for="NombreR">Nombre de Usuario:</label>
                    <input type="text" id="NombreR" name="NombreR" placeholder="Ingrese Nuevo Usuario..." required>
                </div>
                <div class="form-element mr-4">
                    <label for="NameOp">Nombre(Opcional):</label>
                    <input type="text" id="NameOp" name="NameOp" placeholder="Ingrese Su Nombre">
                </div>
                <div class="form-element mr-3">
                    <label class="Letra" for="ContrasenaR">Crear Contraseña:</label>
                    <input type="password" id="ContrasenaR" name="ContrasenaR" placeholder="Ingrese Contraseña..." required>
                </div>
                <div class="form-element mr-5">
                    <label class="Letra" for="ConfirmContrasenaR">Confirmar Contraseña:</label>
                    <input type="password" id="ConfirmContrasenaR" placeholder="Confirme Su contraseña..." required>
                </div>
                <div class="form-element mr-5">

                    <input type="number" id="rolu" name="rolu" value="1" hidden readonly>
                </div>
                <br>
                <a href="{% url 'inicio_sesion' %}">Ya tengo una Cuenta...</a>
                <br>
                <button type="submit" class="btn btn-dark mt-2">Crear Cuenta</button>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-sm-12  mt-1">
            <p class="STitulo p-3" id="warnings"></p>
        </div>
    </div>
    </div>
    </div>
    <script>
        $(document).ready(function() {
          $("#formR").submit(function(e) {
            e.preventDefault();
        
            if (!validarFormulario()) {
              return;
            }
        
            $("#formR").unbind('submit').submit(); 
          });
        
          function validarFormulario() {
            var caracteres = "!@#$%^&*()_+{}:\"<>?|=[];',./`~";
            var mayusuculamin = /^(?=.*[A-Z])/;
            var mincontra = /[0-9]/;
            var minus =  /[a-z]/;
            var correor = $("#email").val();
            var nombrer = $("#NombreR").val();
            var nombreus = $("#NameOp").val();
            var contrasenar = $("#ContrasenaR").val();
            var confcontrasenar = $("#ConfirmContrasenaR").val();
        
            var mostrarmsj = "";
            let enviar = true;
        
            if (nombrer.trim().length < 4 || nombrer.trim().length > 15) {
              mostrarmsj += "- El nombre debe tener entre 4 y 15 caracteres<br>";
              enviar = false;
            }
        
            if (!mayusuculamin.test(contrasenar)) {
              mostrarmsj += "- La contraseña debe tener mínimo una MAYÚSCULA<br>";
              enviar = false;
            }
        
            if (!mincontra.test(contrasenar)) {
              mostrarmsj += "- La contraseña debe tener mínimo un número<br>";
              enviar = false;
            }
        
            if (!minus.test(contrasenar)) {
              mostrarmsj += "- La contraseña debe tener mínimo una minúscula<br>";
              enviar = false;
            }
        
            if (caracteres.split('').some(c => contrasenar.includes(c))) {
              mostrarmsj += "- La contraseña debe tener mínimo un caracter especial para más seguridad<br>";
              enviar = false;
            }
        
            if (contrasenar.length < 8) {
              mostrarmsj += "- La contraseña debe tener al menos 8 caracteres<br>";
              enviar = false;
            }
        
            if (contrasenar !== confcontrasenar) {
              mostrarmsj += "- Las contraseñas no coinciden<br>";
              enviar = false;
            }
        
            if (correor !== "" && !validarCorreo(correor)) {
              mostrarmsj += "- El correo electrónico no es válido<br>";
              enviar = false;
            }
            $("#warnings").html("Advertencia:<br>" + mostrarmsj);
        
            return enviar;
          }
        
          function validarCorreo(correo) {
            var valcorreo = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return valcorreo.test(correo);
          }
        
          function esMayuscula(letra) {
            return letra === letra.toUpperCase();
          }
        });
        </script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>